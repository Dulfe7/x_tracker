# X Tracker

Python‑скрипт для мониторинга активности нескольких аккаунтов X (Twitter) с доставкой уведомлений в Telegram через бота.

## Установка
1. Создайте виртуальное окружение и установите зависимости:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```

2. Создайте `.env` на основе примера ниже.

## Настройка окружения
```env
X_BEARER_TOKEN=ваш_x_bearer_token
TELEGRAM_BOT_TOKEN=токен_телеграм_бота
TELEGRAM_CHAT_ID=id_чата_или_канала
TRACKED_ACCOUNTS=account1,account2
# необязательно:
POLL_SECONDS=120
STATE_FILE=tracker_state.json
```

- `TRACKED_ACCOUNTS` — список логинов через запятую (без `@`).
- `POLL_SECONDS` — интервал опроса API.
- `STATE_FILE` — путь до файла, где хранится последняя увиденная публикация по каждому аккаунту.

## Запуск
### Один опрос
```bash
python -m x_tracker.cli --once
```

### Непрерывный мониторинг
```bash
python -m x_tracker.cli
```

Дополнительно:
- `--interval` — переопределяет `POLL_SECONDS`.
- `--state-file` — переопределяет `STATE_FILE`.

## Как это работает
- Конфигурация считывается из `.env` или переменных окружения.
- Для каждого указанного аккаунта запрашивается `user_id`, затем последние твиты (`retweets` и ответы исключены).
- Новые записи отправляются в Telegram в хронологическом порядке. Состояние сохраняется в `STATE_FILE`, поэтому повторные уведомления не дублируются.

## Предупреждения
- Требуется действующий Bearer Token для X API v2.
- Убедитесь, что у бота есть доступ на отправку сообщений в выбранный чат/канал.
